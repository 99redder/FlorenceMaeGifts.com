name = "fmg-stripe-api"
main = "src/worker.js"
compatibility_date = "2026-02-12"

[vars]
ALLOWED_ORIGIN = "https://www.florencemaegifts.com"
SUCCESS_URL = "https://www.florencemaegifts.com/index.html?checkout=success"
CANCEL_URL = "https://www.florencemaegifts.com/index.html"

# Optional: map item names to fallback price ids if client doesn't send one.
# ITEM_PRICE_MAP = '{"Example Item":"price_..."}'
# Map digital item names to private R2 object keys for one-time download links.
DOWNLOAD_FILE_MAP = '{"Four Star Ball Crochet Baby Hat Pattern - Beginner Level (PDF Download Only)":"Four Star Ball Baby Hat Crochet Pattern.pdf","Crochet Baby Hat Pattern: Five Point Design (PDF Download Only)":"Crochet Baby Hat Pattern.pdf"}'
# Legacy fallback map (optional) for immediate in-browser success modal link.
DOWNLOAD_LINK_MAP = '{}'
# One-time link settings.
DOWNLOAD_BASE_URL = "https://www.florencemaegifts.com/api/download"
DOWNLOAD_TOKEN_TTL_SECONDS = "86400"
DOWNLOAD_TOKEN_MAX_USES = "3"
# Sender email must be a verified Resend domain/sender.
RESEND_FROM_EMAIL = "Florence Mae Gifts <orders@florencemaegifts.com>"
SUPPORT_EMAIL = "florencemaegifts@outlook.com"

[[r2_buckets]]
binding = "DOWNLOADS_BUCKET"
bucket_name = "fmg"

[[kv_namespaces]]
binding = "DOWNLOAD_TOKENS"
id = "7350d3bd812644928452170df7b380ec"
